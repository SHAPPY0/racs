<html lang="en" xmlns="http://www.w3.org/1999/xhtml"> 
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<link rel="stylesheet" href="/bulma.min.css"/>
	<script src="lib.js" type="text/javascript"/>
	<script src="ansi_up.js" type="text/javascript"/>
</head>
<body>
	<pre id="logs" style="background:white; color:black;"/>
	<script type="text/javascript">
		var params = new URL(location).searchParams;
		var task = params.get("task");
		var container = document.getElementById("logs");
		var logs = "";
		var ansi_up = new AnsiUp;
		function fetchLogs() {
			fetch(`/task/logs?id=${task}&amp;offset=${logs.length}`).then(response => response.text()).then(text => {
				logs += text;
				container.innerHTML = ansi_up.ansi_to_html(logs);
			});
		}
		fetchLogs();
		setInterval(fetchLogs, 1000);
	</script>
</body>
</html>
